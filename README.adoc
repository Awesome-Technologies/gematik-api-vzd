= Verzeichnisdienst der Telematikinfrastruktur
gematik, Systems Engineering
:source-highlighter: rouge
:title-page:
:imagesdir: images/
//:sectnums:
//:toc:
//:toclevels: 3
//:toc-title: Inhaltsverzeichnis

image::gematik_logo.png[gematik]


image:https://shields.io/badge/gemSpec__VZD-v1.13.1-blue[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_VZD_V1.13.1.pdf"]
image:https://shields.io/badge/v1.13.0-blue[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_VZD_V1.13.0.pdf"]
image:https://shields.io/badge/v1.12.0-blue[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_VZD_V1.12.0.pdf"] image:https://shields.io/badge/gemILF_Pflege_VZD-v1.5.1-green[link="https://fachportal.gematik.de/fileadmin/Fachportal/Downloadcenter/Implementierungsleitfaeden/gemILF_Pflege_VZD_V1.5.1.pdf"]

== Allgemeines

Die folgende Dokumentation beschreibt wie der Verzeichnisdienst der Telematikinfrastruktur genutzt werden kann.
Insbesondere welche Daten im FHIR-Directory gespeichert werden und welche Bedeutung sie haben, wird beschrieben.
Die Schnittstellen des Verzeichnisdienstes sind in Spezifikationen der gematik definiert:

* image:https://shields.io/badge/gemSpec__VZD-v1.13.1-blue[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_VZD_V1.13.1.pdf"]
image:https://shields.io/badge/v1.13.0-blue[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_VZD_V1.13.0.pdf"]
image:https://shields.io/badge/v1.12.0-blue[link="https://fachportal.gematik.de/fachportal-import/files/gemSpec_VZD_V1.12.0.pdf"]
* image:https://shields.io/badge/gemILF_Pflege_VZD-v1.5.1-blue[link="https://fachportal.gematik.de/fileadmin/Fachportal/Downloadcenter/Implementierungsleitfaeden/gemILF_Pflege_VZD_V1.5.1.pdf"]
* `gemSpec_FHIR_Directory`

Die Daten des LDAP-Directories sind im Implementierungsleitfaden zur Pflege der Daten des Verzeichnisdienstes beschrieben.
Die Dokumente können im Fachportal der gematik gefunden werden: https://fachportal.gematik.de/downloadcenter.

== Systemarchitektur

Die folgende Abbildung gibt einen Überblick über die Systemarchitektur des Verzeichnisdienstes.

image::VZD_FHIR_Directory_Zerlegung.svg[VZD overview]

== FHIR-Directory Datenmodell

image::VZD_FHIR_Directory_Datenmodell.svg[Datenmodell]

=== TIOrganization

Die Ressource TIOrganization ist in https://simplifier.net/vzd-fhir-directory/tiorganization[Simplifier] definiert und ist ein Profil der https://www.hl7.org/fhir/organization.html#resource[Organization Ressource].
Die einzelnen Elemente der Ressource TIOrganization werden abhängig vom type der Organisation befüllt. Es wird unterschieden zwischen

- Organisationen mit einer zugewiesenen professionOID gemäß https://gematik.de/fhir/VZD-FHIR-Directory/CodeSystem/TIProfessionOidCS[CodeSystem TIProfessionOidCS] und
- Organisationen gemäß https://gematik.de/fhir/VZD-FHIR-Directory/CodeSystem/TIOrganizationTypeCS[CodeSystem TIOrganizationTypeCS] (TI-Messenger-Provider, KIM-Provider und Kartenherausgeber).

Alle Organisationstypen sind mit dem jeweils verwendeten CodeSystem im https://simplifier.net/vzd-fhir-directory/tiorganizationtypevs[Valueset TIOrganizationTypeVS] festgelegt.
Eine Organization Ressource kann auch mehrere type Elemente haben.

.*Organisationen mit professionOID, Pflege durch Kartenherausgeber oder Synchronisation aus LDAP-Directory*
|===
|Element / Attribut |Wert |Beschreibung

|*identifier.system* _(mustsupport)_
|http://fhir.de/StructureDefinition/identifier-telematik-id
|Die telematikID ist im FHIR Basisprofil von HL7 Deutschland definiert.

|*identifier.value* _(mustsupport)_
|telematikID der Organisation
|Die telematikID wird vom Verband der Organisation vergeben (z. B. von der KV für Arztpraxen).

|*active* _(mustsupport)_
|true oder false
|Gibt an, ob der Eintrag aktiv genutzt wird oder ob er deaktiviert ist.

|*type.system* _(mustsupport)_
|https://gematik.de/fhir/VZD-FHIR-Directory/CodeSystem/TIProfessionOidCS[TIProfessionOidCS]
|

|*type.code* _(mustsupport)_
|Code aus https://simplifier.net/vzd-fhir-directory/tiorganizationtypevs[TIOrganizationTypeVS]
|ProfessionOID der Organisation

|*type.display* _(mustsupport)_
|Display aus https://simplifier.net/vzd-fhir-directory/tiorganizationtypevs[TIOrganizationTypeVS]
|Text-Repräsentation der ProfessionOID

|*name* _(mustsupport)_
|Name der Organisation
|

|*alias* _(mustsupport)_
|Alternativer Name der Organisation
|

|*address* _(mustsupport)_
|Adresse
|Eine oder mehrere Adressen der Organisation

|*address.text* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.line* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.city* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.district* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.state* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.postalCode* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*country* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*partOf* _(mustsupport)_
|Referenz auf einen anderen Organization Eintrag
|Wird verwendet, wenn die Organisation mehrere telematikIDs besitzt.
|===

.*Organisationen mit professionOID, Pflege durch Besitzer der telematikID*
|===
|Element / Attribut |Wert |Beschreibung

|*identifier.system* _(mustsupport)_
|http://fhir.de/StructureDefinition/identifier-telematik-id[identifier-telematik-id]
|Die telematikID ist im FHIR Basisprofil von HL7 Deutschland definiert.

|*identifier.value* _(mustsupport)_
|Identifier
|Der Identifier wird vom identifier.value des referenzierten Eintrags abgeleitet und identifiziert den Eintrag eindeutig. Als Trennzeichen wird ein Punkt "." verwendet: <identifier.value des referenzierten Eintrags>.<neue ID>

|*active* _(mustsupport)_
|true oder false
|

|*type.system* _(mustsupport)_
|https://gematik.de/fhir/VZD-FHIR-Directory/CodeSystem/TIProfessionOidCS[TIProfessionOidCS]
|

|*type.code* _(mustsupport)_
|Code aus https://simplifier.net/vzd-fhir-directory/tiorganizationtypevs[TIOrganizationTypeVS]
|ProfessionOID der Organisation

|*type.display* _(mustsupport)_
|Display aus https://simplifier.net/vzd-fhir-directory/tiorganizationtypevs[TIOrganizationTypeVS]
|Text-Repräsentation der ProfessionOID

|*name* _(mustsupport)_
|Name der Organisation
|

|*alias* _(mustsupport)_
|Alternative Namen der Organisation
|

|*address* _(mustsupport)_
|Eine oder mehrere Adressen der Organisation
|

|*address.text* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.line* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.city* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.district* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.state* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*address.postalCode* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*country* _(mustsupport)_
|Siehe https://www.hl7.org/fhir/datatypes.html#Address[Address]
|

|*partOf* _(mustsupport)_
|Referenz auf einen anderen Organization Eintrag
|Wird verwendet, um auf den Basiseintrag der Organisation zu referenzieren und wenn die Organisation eine Struktur besitzt, die im FHIR-Directory abgebildet werden soll. Wenn vom Besitzer einer telematikID eine Organization Ressource erzeugt wird, dann muss diese immer über partOf Referenzen mit dem Basiseintrag der Organisation verknüpft sein. Die partOf Referenzen können über mehrere Stufen zum Basiseintrag führen.

|*contact.purpose* _(mustsupport)_
|
|Bezeichnet den von diesem contact Element unterstützten Prozess. Gültige Werte werden von der gematik im Fachportal veröffentlicht (siehe <link ergänzen>).

|*contact.name* _(mustsupport)_
|Name
|Der Name des contact Elements, wie er bei gefundenen Einträgen angezeigt wird

|*contact.telecom.system* _(mustsupport)_
|
|Siehe https://www.hl7.org/fhir/datatypes.html#ContactPoint[ContactPoint].
Für TI-Messenger-Adressen wird das system url verwendet.
Für KIM E-Mail-Adressen wird das system email verwendet.

|*contact.telecom.value* _(mustsupport)_
|Adresse des Kontakts
|Siehe https://www.hl7.org/fhir/datatypes.html#ContactPoint[ContactPoint].
TI-Messenger-Adressen werden un der url Notation angegeben: matrix:u/localpart:tim-domain
KIM E-Mail-Adressen werden als E-Mail Adressen angegeben: localpart@kim-domain.

|*contact.telecom.period.end* _(mustsupport)_
|
|Siehe https://www.hl7.org/fhir/datatypes.html#Period[Period].
Wenn der Wert vorhanden ist und in der Vergangenheit liegt, dann wird die Kontakt-Adresse nicht verwendet.
|===

==== TI-Messenger-Provider

==== Kartenherausgeber


=== TIPractitioner

=== HealthcareService

=== PractitionerRole

=== Location

=== Endpoint
